# Keyboard Accessibility Testing

The techniques here should be used during development and in formal testing.

## Enabling Keyboard Access on a Mac

As mentioned elsewhere, you have to enable keyboard accessibility in 2 places on macOS.

- In system prefs:
    - Check the checkbox at System Preferences > Keyboard > Shortcuts > Use keyboard navigation to move focus between controls
- In Safari:
    - Check the checkbox at Safari Preferences > Advanced > Accessibility > Press Tab to highlight each item on a webpage.

## Testing Methodology for Tab Focusability and Order
1. Start with placing the cursor into the address bar or URL field in the web browser.
2. From there, using the keyboard only, navigate into the web page using the Tab key.
3. As you tab through the web page, make note of elements that receive keyboard focus. Check that the tabbing order makes sense according to the content on the web page. It is best practice for the tab order to follow the reading order of the web page.
4. Navigate backwards using Shift + Tab.
5. Ensure all focusable elements actually receive keyboard focus. Any links, form inputs, interactive controls, and buttons should all receive keyboard focus.

## Testing Methodology for Keyboard Functionality

You have to know what functionality exists on a page then check it is all possible with only the keyboard.

1. Check that you can tab to all the elements, including links, form fields, buttons, and media player controls. Make sure there are no actions or options that you cannot get to because they are only available on mouse hover or through click actions.
2. Check that you can tab away from all the elements that you can tab into. A common problem is keyboard focus getting caught in controls and custom widgets and you cannot get out; it's called the "keyboard trap."
3. For elements such as select boxes, sliders, or menu bars, check that you can move within the elements using the down arrow key or up arrow key. (Make sure that you can navigate within the elements without causing a change in context, such as highlighting the first item in a drop down menu automatically selects that item.)
4. Be sure you can use the Enter key or Space bar to select a specific item within an element.

## Testing Keyboard Functionality with Screen Reader On

Screen readers can interfere with custom keyboard shortcuts, so you have to test that keyboard functionality also works with the screen reader on. You also have to check that a user can use the various screen reader modes and shortcuts to navigate to the intended page sections.

1. Open the web page using a screen reader and its compatible browser (it will be wise to test with multiple screen readers and browsers).
2. Navigate into the web page from the URL field using the Tab key.
3. While browsing through the web page, use some of the common keystrokes available to screen reader users (for instance, H for headings, G for images).
4. If possible, locate elements like a table or a form to use keystrokes available in different modes (table mode, forms mode). Check that the keystrokes available in those specific modes are functional.

## Testing the Visual Focus Indicator

As the user tabs through the page, their focus should be visible at all times.

### Keyboard-only testing

1. Tab into the web page from the URL field in the browser.
2. As you navigate through the web page, check to see that focusable elements have a clear, visible indicator that identifies visual focus.
    1. Elements like links, buttons, and form controls should have a border around them or another similar indicator.
    2. The browser's default focus (sometimes a dashed border or outline around the element) will suffice, even though it is best practice to enhance the focus through CSS.
3. If images are used as links or if there are other types of active images, make sure they also have a visual focus indicator.
4. When a text field receives focus, focus should be identified. This can be through a vertical bar or text highlighted in the field to let users know they can type. The field can also have a border or outline in addition to a vertical bar within the field.

### Mouse-Only Testing

Visual focus should follow what is selected by the mouse as well. This includes clicking into an input or button, and opening a widget that changes the focus.

The visual hover indicator is important for mouse users when they are hovering over active elements - elements that can be clicked to cause an action.

## Testing Focus Management (Form Validation, Dialogs, AJAX, Etc.)

If the content generated by the user is a modal dialog:

1. Ensure the keyboard focus is sent to the dialog when it is opened. For short dialogs, the focus can be sent to a default button in the dialog. For larger dialogs, the focus can be sent to the first heading in the dialog.
2. Make sure the focus stays within the dialog. You must not be able to tab or navigate anywhere outside of the dialog.
3. When the dialog is closed, either through a button or the Esc key, check that the focus returns to the element that triggered the dialog. It must not reset to the top of the page or disappear altogether.

If the content generated by the user occurs in the page itself (form validation success/error messages, AJAX):

1. Make sure the focus moves to the new content on the web page so users can find the content.
2. If the content can be closed by the user, then focus must be shifted either back to where the user was previously on the web page or where the next logical interaction takes place. For instance, with a form error message, focus may be moved to the first input that contains an error.


## Keyboard Traps

To test for keyboard traps:

1. Navigate into the web page from the URL field using only the Tab key.
2. As you tab through elements on the web page, be cognizant of any difficulties you encounter. You should be able to tab repeatedly through all focusable elements such as links, form controls, and menu items.
3. For custom widgets, you should be able to tab to the widget and use the arrow keys to navigate within the widget. You should also be able to tab out of the widget.
4. Use Shift + Tab to navigate the web page in reverse. Make sure you can tab backwards easily without the keyboard focus getting trapped.

You should also not be able to tab to things that are not on the screen!